By AoDong Chen
# 关于无服务器计算中应用开发难题的实证研究
[An Empirical Study on Challenges of Application Developmentin Serverless Computing](https://2021.esec-fse.org/details/fse-2021-papers/27/An-Empirical-Study-on-Challenges-of-Application-Development-in-Serverless-Computing)

本文通过分析Stack Overflow上与无服务器计算相关的问题，发现无服务器计算越来越受到软件工程师的关注。此外，作者还发现，与无服务器计算相关的问题比软件工程中其他方面的难题（如Web开发、并发、移动开发）更难回答，这促使作者探究背后的具体问题。作者人工检查了619个与无服务器计算相关的问题，并构建了一个全面的分类树，包括11个内部类别节点和36个叶子类别节点，每个节点代表了开发者在开发基于无服务器的应用时遇到的难题所属种类。

作者的研究为开发者、研究人员和云供应商提供了一系列实用的结论和可操作的启示，尝试指出与无服务器计算模式相关的优良实践和一些有趣的研究途径。  

## 论文作者
Jinfeng Wen：北京大学研究人员。

Zhenpeng Chen (陈 震鹏)：北京大学计算机科学与技术的博士。研究方向主要是网络挖掘和软件分析。

Yi Liu：北京大学研究人员。

## 论文动机
无服务器计算是一种新兴的云计算范式，在视频处理、科学计算、机器学习、大数据处理、物联网等众多领域受到欢迎。此外，根据权威预测，到2025年，全球50%的企业将采用无服务器计算。
无服务器计算将开发者从复杂的基础设施管理中解放出来而只需关注应用逻辑，用多少花多少，此外，它还提高了云服务商的资源利用率。所以主流的云服务商都推出了他们自己的无服务器平台。
由于无服务器的火爆现象，研究人员们就从不同的角度对无服务器计算进行了研究。例如，有研究人员比较了不同无服务器平台的功能、架构和性能特性，从而了解了它们之间的差异，并得出为特定应用场景选择最合适平台的准则。此外，目前的无服务器平台有如启动时间过长和通信带宽有限的缺点，研究人员就提出了新的架构和解决方案来缓解或消除这些缺点。同时无服务器的开发者也越来越多，Stack Overflow上出现了许多与无服务器开发相关的问题，而这些问题并没有得到很好的研究。因此，论文进行了第一个全面的研究，从开发者的角度来分析开发基于无服务器应用程序时遇到的问题。

这篇论文要研究的问题主要有以下三个：
- 无服务器计算在开发者中的流行趋势是什么？
- 无服务器计算对开发者来说有多难？
- 开发人员在开发基于服务器的应用程序时遇到了哪些种类的问题？  

## 论文贡献
本篇论文使用严谨的逻辑对SO上的问题进行了科学的分析。主要贡献有以下内容：
- 通过分析SO上的问题数量与用户数量，得出无服务器计算越来越受到开发者的关注的结论。
- 通过计算问题没有得到有效回答的比例和从提出问题到得到有效回答的时间间隔，得出与无服务器计算相关的问题比SO上所有问题和其他软件开发方向问题（如Web开发、并发性和移动开发）的平均难度更高的结论。
- 通过有效抽样与人工分析样本问题，把与无服务器开发的相关的问题种类归纳成一颗多叉树，并为开发者、云服务商、科研人员提供了一些可行有效的建议。

## 实验
### 研究方法概述
![overview_of_methodology](https://cdn.jsdelivr.net/gh/CAD2115/image-hosting@main/used_by_paper_review/overview_of_methodology.3k332ncn5sy0.jpg)  

首先，下载数据集，然后从中抽取与serverless相关的问题，最后依次解答之前提出的三个研究问题。

### 实验内容

#### 步骤一 下载数据集
作者于2020年12月9日下载了Stack Exchange Data Dump上整个SO问题集合，囊括了从2008年7月31日到2020年12月8日的所有问答,记为 S<sub>all</sub> 。  
对于每个问题，元数据包括其标识符、创建日期、正文、标题、答案、能够代表问题主题的一到五个标签等。  
此外，提出问题的用户可以将一个对解决该问题有用的回答标记为被接受的回答。

#### 步骤二 抽取与研究相关的问题
1）首先选定初始标签集 T<sub>ini</sub> = {“serverless”, “faas”}。  

2）将所有包含 T<sub>ini</sub> 中标签的问题记为 S<sub>cand</sub>,然后将 S<sub>cand</sub> 中的标签吸收到标签集中，记此时的标签集为 T<sub>cand</sub> 。  

3）提炼出 T<sub>cand</sub> 中与serverless强相关的标签，提炼方法如下：  
![uv](https://cdn.jsdelivr.net/gh/CAD2115/image-hosting@main/used_by_paper_review/uv.73nn5xbbnzc0.jpg)
当μ大于0.005且ν大于0.05时标签t才能被保存在Tcand中，否则去除。  
(μ为具有t标签的问题数除以 S<sub>cand</sub> 总数，该值越大说明标签t是 S<sub>cand</sub> 中的共同特性，则t对于serverless很重要；ν为 S<sub>cand</sub> 中具有t标签的问题数除以所有问题中具有标签t的问题数，这个参数可以表明标签t与serverless的相关程度，若该值为1，代表t只出现在当前提取的与serverless相关的问题中，而不会出现在与serverless无关的问题中，则此时t与serverless最相关。至于为什么阈值设为0.005和0.05，是由于之前的论文做了实验证明出来的。)  

4）最后由第一第二作者依次判断 Tcand 中的标签是否与无服务器计算相关。  
	最终 T<sub>final</sub> = {“serverless”, “faas”, “serverless-framework”, “aws-serverless”,“openwhisk”, “aws-lambda”, “aws-sam”, “aws-sam-cli”, “serverless-architecture”, “serverless-oine”, “vercel”, “serverless-plugins”,“localstack”}，共抽取了22731个至少包含其中一个标签的问题，记为S<sub>rel</sub>。

#### 步骤三 确定无服务器计算的流行趋势
![result_of_step1](https://cdn.jsdelivr.net/gh/CAD2115/image-hosting@main/used_by_paper_review/result_of_step1.6iynxl5eyfs0.jpg)   
作者统计每一年的问题数量和用户数量，得到这个柱形图，横轴是年份，纵轴为数量。显然，问题数量与用户数量都在逐年上升。此外，作者将SO上的全部问题作为基准。然后发现从2015年到2020年，SO上问题和用户的增长率在6%和22%之间，而与无服务器计算相关的问题和用户的增长率则在47%和380%之间。  
**结论：无服务器计算越来越受到开发者的关注，这也表明了作者研究的及时性和紧迫性。**  

#### 步骤四：确定无服务器计算相关问题的难度等级
![result_of_step2](https://cdn.jsdelivr.net/gh/CAD2115/image-hosting@main/used_by_paper_review/result_of_step2.1c4hnbfoiark.jpg)   
第一行%no acc指的是该种问题中没有得到有效回答的问题比例，第二行指的是从问题发布到得到有效解答经历的时间。显然这两个值都是serverless的值最高。  
**结论：与无服务器计算相关的问题比SO上所有问题和其他软件开发方向问题（如Web开发、并发性和移动开发）的平均难度更高。**

#### 步骤五：对无服务器计算开发的问题进行分类
- *样本抽取方法*  
  根据前人的工作，作者从 S<sub>rel</sub> 中选用了8751个拥有确凿解决方案的问题；由于人工标记这么大的样本量太过耗费时间，作者再次根据前人的工作从8751个问题中抽取了619个。
- *问题分类方法*  
  首先采用619个问题的70%来构建初试问题种类。然后人工审查问题进行分类。有些问题可以直接根据问题描述分析出所属类别。其他问题作者则将造成该问题的原因作为问题所属类别；此外，作者将多种问题用一个短语再次进行归类，构建了问题种类的层次树。最后将剩余的30%的问题依次归到这颗分类树中，无法进行归类的则添加种类。  
  最后，对于619个抽样问题，其中的4个问题被标记为与无服务器计算无关，17个问题同时属于两类问题。因此，最终分类树中包含 632 个样本。
- *分类树如下：*
 ![result_of_step3](https://cdn.jsdelivr.net/gh/CAD2115/image-hosting@main/used_by_paper_review/result_of_step3.46xy5zclqhg0.jpg)  
  该图就是作者最终构建的问题种类树，共有7大类，11个内部类别，36个叶子类别。内部类别指的是颜色为灰色还可以在继续分类的类别，叶子类别不可再分。  
- *结论：*  
  论文对每一种类的问题分析其出现的场景与原因，并为开发者、云服务商、科研人员提供一些建设性意见。这里我们截取论文对性能相关问题的分析与结论：  
  性能相关问题又可分为四个种类，分别为运行延迟（G6.1）、资源利用（G6.2）、冷启动（G6.3）、吞吐量（G6.4）。
    - 运行延迟：开发者总是尝试使用某种策略来加快函数的执行延迟。例如，开发者可以通过压缩数据来加快数据加载速度同时节省网络带宽。
    - 资源利用：开发者会发现资源之间的竞争现象，如I/O和CPU的竞争。
    - 冷启动：当一个函数为首次调用时，这个调用则会经历冷启动并创建一个函数容器。这个容器至少在几分钟内会一直保持活跃，方便后续的调用。开发人员经常周期性的调用某个函数来减少冷启动，即 "保温"。
    - 吞吐量：开发者需要找到提高吞吐量的方法。 
   
   对于性能方面的难题，开发者希望从不同的角度来提高性能，即执行延迟、资源利用率、冷启动和吞吐量。此外，无服务器平台的性能问题是学术界广泛研究的问题。例如，一些论文就从函数的执行延迟、资源利用率、吞吐量等方面评估了不同无服务器平台的性能。此外，一些研究通过系统优化或沙盒设计将冷启动降到最低，以提高执行效率。通过比较，我们发现学术界和工业界在性能方面有相似的关注点。在这种情况下，研究人员可以从开发者实践的角度考虑提高性能，例如，使用数据压缩来减少网络开销。此外，我们发现开发人员对性能的提问（2.4%）少于对应用影响的提问（35.4%）。这一观察结果与其他工作的观察结果相吻合，也就是说，开发人员对他们程序的正确性的询问多于性能。

## 总结
本篇论文采用了一种通用的论坛问题研究方法论，对无服务器领域的开发问题进行了研究。其中研究方法中的抽样方法论文并没有给出详细的过程，有待研究；最终构造的问题分类树中关于性能的问题，作者提出了可以通过压缩数据来提高性能的建议，以后对该方向的内容有足够的了解后或许可以考虑考虑。而关于无服务器计算成本的相关问题，论文是从使用者无法准确估计预算的角度来考虑，认为云服务商应该提供一个对用户更加友好的计算模式，与研究人员考虑的角度不同。
